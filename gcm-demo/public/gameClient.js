// Generated by CoffeeScript 1.7.1
(function() {
  var addMessage, emitSuper, inputElement, lastMessageElement, messageElement, onSuper, root, socket;

  root = typeof exports !== "undefined" && exports !== null ? exports : this;

  root.g = {
    score: 0,
    keys: {
      39: false,
      37: false,
      38: false,
      40: false
    },
    logged: false,
    name: null,
    sprite: null,
    packets: [],
    me: null,
    enemy: null
  };

  messageElement = document.getElementById('messages');

  lastMessageElement = null;

  addMessage = function(message) {
    var newMessageElement, newMessageText;
    newMessageElement = document.createElement('div');
    newMessageText = document.createTextNode(message);
    newMessageElement.appendChild(newMessageText);
    messageElement.insertBefore(newMessageElement, lastMessageElement);
    return lastMessageElement = newMessageElement;
  };

  socket = io.connect(window.location.origin);

  root.socket = socket;

  emitSuper = socket.emit;

  socket.emit = function() {
    return emitSuper.apply(socket, arguments);
  };

  onSuper = socket.$emit;

  socket.$emit = function() {
    if (arguments[0] === 'sChat') {
      return onSuper.apply(socket, arguments);
    } else {
      return root.g.packets.push({
        msgType: arguments[0],
        data: arguments[1]
      });
    }
  };

  socket.on('sChat', function(content) {
    return addMessage(content);
  });

  inputElement = document.getElementById('input');

  inputElement.onkeydown = function(keyboardEvent) {
    if (keyboardEvent.keyCode === 13) {
      socket.emit('cChat', {
        from: g.name,
        to: '',
        msg: inputElement.value
      });
      inputElement.value = '';
      return false;
    } else {
      return true;
    }
  };

}).call(this);

//# sourceMappingURL=gameClient.map

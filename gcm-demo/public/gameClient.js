// Generated by CoffeeScript 1.6.3
(function() {
  var addMessage, inputElement, lastMessageElement, messageElement, root, socket;

  root = typeof exports !== "undefined" && exports !== null ? exports : this;

  root.g = {
    score: 0,
    keys: {
      39: false,
      37: false,
      38: false,
      40: false
    },
    logged: false,
    name: null,
    sprite: null,
    moves: [],
    quits: []
  };

  messageElement = document.getElementById('messages');

  lastMessageElement = null;

  addMessage = function(message) {
    var newMessageElement, newMessageText;
    newMessageElement = document.createElement('div');
    newMessageText = document.createTextNode(message);
    newMessageElement.appendChild(newMessageText);
    messageElement.insertBefore(newMessageElement, lastMessageElement);
    return lastMessageElement = newMessageElement;
  };

  socket = io.connect(window.location.origin);

  root.socket = socket;

  socket.on('sLogin', function(data) {
    root.g.sprite = data.sprite;
    return root.g.name = data.name;
  });

  socket.on('sChat', function(content) {
    return addMessage(content);
  });

  socket.on('sMove', function(data) {
    return root.g.moves.push(data);
  });

  socket.on('sQuit', function(data) {
    return root.g.quits.push(data);
  });

  inputElement = document.getElementById('input');

  inputElement.onkeydown = function(keyboardEvent) {
    if (keyboardEvent.keyCode === 13) {
      socket.emit('cChat', inputElement.value);
      inputElement.value = '';
      return false;
    } else {
      return true;
    }
  };

}).call(this);

/*
//@ sourceMappingURL=gameClient.map
*/
